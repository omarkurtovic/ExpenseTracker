@rendermode InteractiveWebAssembly

@using MudBlazor

@inject ISnackbar Snackbar
@inject IDialogService DialogService

<FabButton Class="@Class" Text="Add" IconClass="@Icons.Material.Filled.Add" OnClick="() => OpenTransactionDialogAsync()" />
    
@code{

    [CascadingParameter]
    public bool IsReoccuring{get; set;} = false;

    [Parameter]
    public EventCallback<bool> OnClose { get; set; }

    [Parameter]
    public string Class { get; set; } = null!;

    private async Task OpenTransactionDialogAsync()
    {
        var options = new DialogOptions
        {
            CloseOnEscapeKey = true,
            NoHeader = false,
            CloseButton = true,
            MaxWidth = MaxWidth.Medium
        };
        var parameters = new DialogParameters<TransactionDialog>
            {
                { x => x.TransactionDto, null },
                { x => x.IsReoccuring, IsReoccuring }
            };

        var dialog = await DialogService.ShowAsync<TransactionDialog>(title: "Simple Dialog", parameters, options);
        var result = await dialog.Result;
        await OnClose.InvokeAsync(false);
    } 
}